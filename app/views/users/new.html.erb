
<h1><%= @user.new_record? ? '注册' : '编辑' %>用户</h1>
<div class="row">
  <div class="col-sm-5">
    <%= form_for @user, url: (@user.new_record? ? users_path : user_path(@user)), method: (@user.new_record? ? :post : :put) do |f| %>
      <div class="form-group">
        <ul class="list-unstyled">
          <% @user.errors.messages.values.flatten.each do |error| %>
            <li><i class="fa fa-exclamation-circle"></i> <%= error %></li>
          <% end -%>
        </ul>
      </div>
      <% if @user.new_record? %>
      <div class="form-group">
        <%= f.text_field :username, class: "form-control", placeholder: "用户名" %>
      </div>
      <% else %>
      <div class="form-group">
        <%= f.text_field :oldpassword, class: "form-control", placeholder: "原密码" %>
      </div>
      <% end -%>
      <div class="form-group">
        <%= f.password_field :password, class: "form-control", placeholder: "密码" %>
      </div>
      <div class="form-group">
        <%= f.password_field :password_confirmation, class: "form-control", placeholder: "密码确认" %>
      </div>
      <% if @user.new_record? %>
      <%= f.submit "注册", class: "btn btn-primary" %> 
      <%= link_to "登录", new_session_path %>
      <% else %>
       <%= f.submit "保存", class: "btn btn-primary" %>
      <% end -%>
    <% end -%>
  </div>

  <div class="col-sm-7">
  </div>
</div>